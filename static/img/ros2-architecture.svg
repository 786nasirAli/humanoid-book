<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="100%" height="100%" fill="white" />

  <!-- Title -->
  <text x="400" y="40" text-anchor="middle" font-size="20" font-weight="bold" fill="#333">ROS 2 Architecture - The Robotic Nervous System</text>

  <!-- ROS 2 Middleware (Brain/DDS) -->
  <rect x="300" y="100" width="200" height="80" rx="10" ry="10" fill="#4CAF50" stroke="#2E7D32" stroke-width="2" />
  <text x="400" y="145" text-anchor="middle" font-size="16" fill="white">DDS Middleware</text>
  <text x="400" y="165" text-anchor="middle" font-size="12" fill="white">(Data Distribution Service)</text>

  <!-- Nodes -->
  <g>
    <rect x="100" y="250" width="140" height="60" rx="5" ry="5" fill="#2196F3" stroke="#0D47A1" stroke-width="2" />
    <text x="170" y="280" text-anchor="middle" font-size="14" fill="white">Sensor Node</text>
    <text x="170" y="300" text-anchor="middle" font-size="12" fill="white">(Camera, IMU, etc.)</text>
  </g>

  <g>
    <rect x="330" y="250" width="140" height="60" rx="5" ry="5" fill="#2196F3" stroke="#0D47A1" stroke-width="2" />
    <text x="400" y="280" text-anchor="middle" font-size="14" fill="white">Controller Node</text>
    <text x="400" y="300" text-anchor="middle" font-size="12" fill="white">(Motion Control)</text>
  </g>

  <g>
    <rect x="560" y="250" width="140" height="60" rx="5" ry="5" fill="#2196F3" stroke="#0D47A1" stroke-width="2" />
    <text x="630" y="280" text-anchor="middle" font-size="14" fill="white">AI Node</text>
    <text x="630" y="300" text-anchor="middle" font-size="12" fill="white">(Decision Making)</text>
  </g>

  <!-- Topics -->
  <g>
    <!-- Sensor Data Topic -->
    <ellipse cx="200" cy="210" rx="80" ry="20" fill="#FFC107" stroke="#FF6F00" stroke-width="2" />
    <text x="200" y="215" text-anchor="middle" font-size="12" fill="#333">/sensor_data</text>
  </g>

  <g>
    <!-- Command Topic -->
    <ellipse cx="400" cy="210" rx="80" ry="20" fill="#FFC107" stroke="#FF6F00" stroke-width="2" />
    <text x="400" y="215" text-anchor="middle" font-size="12" fill="#333">/cmd_vel</text>
  </g>

  <g>
    <!-- State Topic -->
    <ellipse cx="600" cy="210" rx="80" ry="20" fill="#FFC107" stroke="#FF6F00" stroke-width="2" />
    <text x="600" y="215" text-anchor="middle" font-size="12" fill="#333">/robot_state</text>
  </g>

  <!-- Arrows (Publish/Subscribe relationships) -->
  <!-- From Sensor Node to Sensor Data Topic -->
  <line x1="170" y1="250" x2="200" y2="230" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- From Sensor Data Topic to Controller and AI Nodes -->
  <line x1="250" y1="210" x2="340" y2="250" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="250" y1="210" x2="550" y2="250" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- From AI Node to Command Topic -->
  <line x1="600" y1="250" x2="560" y2="210" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- From Command Topic to Controller Node -->
  <line x1="480" y1="210" x2="460" y2="250" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- From Controller Node to State Topic -->
  <line x1="400" y1="250" x2="400" y2="230" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- From State Topic to Sensor and AI Nodes -->
  <line x1="350" y1="210" x2="240" y2="250" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="450" y1="210" x2="560" y2="250" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>

  <!-- Biological Nervous System Analogy -->
  <g transform="translate(50, 400)">
    <text x="0" y="0" font-size="16" font-weight="bold" fill="#333">Biological Nervous System Analogy</text>
    <rect x="0" y="10" width="250" height="150" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2" />
    
    <circle cx="40" cy="40" r="15" fill="#FF5722" />
    <text x="40" y="70" text-anchor="middle" font-size="12" fill="#333">Sensory</text>
    <text x="40" y="85" text-anchor="middle" font-size="12" fill="#333">Organs</text>
    
    <circle cx="210" cy="40" r="15" fill="#9C27B0" />
    <text x="210" y="70" text-anchor="middle" font-size="12" fill="#333">Brain</text>
    <text x="210" y="85" text-anchor="middle" font-size="12" fill="#333">(Processing)</text>
    
    <circle cx="125" cy="120" r="15" fill="#FF9800" />
    <text x="125" y="150" text-anchor="middle" font-size="12" fill="#333">Muscles</text>
    <text x="125" y="165" text-anchor="middle" font-size="12" fill="#333">(Effectors)</text>
    
    <!-- Neural pathways -->
    <line x1="55" y1="40" x2="195" y2="40" stroke="#795548" stroke-width="3" stroke-dasharray="5,5" marker-end="url(#arrowhead2)" />
    <line x1="195" y1="55" x2="140" y2="110" stroke="#795548" stroke-width="3" stroke-dasharray="5,5" marker-end="url(#arrowhead2)" />
    <line x1="110" y1="110" x2="55" y2="55" stroke="#795548" stroke-width="3" stroke-dasharray="5,5" marker-end="url(#arrowhead2)" />
  </g>

  <!-- ROS 2 Nervous System -->
  <g transform="translate(450, 400)">
    <text x="0" y="0" font-size="16" font-weight="bold" fill="#333">ROS 2 Nervous System</text>
    <rect x="0" y="10" width="250" height="150" fill="#E3F2FD" stroke="#2196F3" stroke-width="2" />
    
    <circle cx="40" cy="40" r="15" fill="#FF5722" />
    <text x="40" y="70" text-anchor="middle" font-size="12" fill="#333">Sensor</text>
    <text x="40" y="85" text-anchor="middle" font-size="12" fill="#333">Nodes</text>
    
    <circle cx="210" cy="40" r="15" fill="#9C27B0" />
    <text x="210" y="70" text-anchor="middle" font-size="12" fill="#333">AI/Control</text>
    <text x="210" y="85" text-anchor="middle" font-size="12" fill="#333">Nodes</text>
    
    <circle cx="125" cy="120" r="15" fill="#FF9800" />
    <text x="125" y="150" text-anchor="middle" font-size="12" fill="#333">Actuator</text>
    <text x="125" y="165" text-anchor="middle" font-size="12" fill="#333">Nodes</text>
    
    <!-- Communication pathways (Topics) -->
    <line x1="55" y1="40" x2="195" y2="40" stroke="#795548" stroke-width="3" marker-end="url(#arrowhead2)" />
    <line x1="195" y1="55" x2="140" y2="110" stroke="#795548" stroke-width="3" marker-end="url(#arrowhead2)" />
    <line x1="110" y1="110" x2="55" y2="55" stroke="#795548" stroke-width="3" marker-end="url(#arrowhead2)" />
  </g>

  <!-- Arrow marker definition for biological analogy -->
  <defs>
    <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#795548" />
    </marker>
  </defs>

  <!-- Legend -->
  <g transform="translate(300, 550)">
    <rect x="0" y="0" width="200" height="40" fill="#FFF" stroke="#333" />
    <circle cx="15" cy="15" r="6" fill="#2196F3" />
    <text x="30" y="20" font-size="12" fill="#333">ROS 2 Node</text>
    <ellipse cx="15" cy="30" rx="10" ry="5" fill="#FFC107" />
    <text x="30" y="35" font-size="12" fill="#333">Topic/Channel</text>
  </g>
</svg>