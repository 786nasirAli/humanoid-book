<svg width="1000" height="700" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="100%" height="100%" fill="white" />

  <!-- Title -->
  <text x="500" y="40" text-anchor="middle" font-size="24" font-weight="bold" fill="#333">Complete Humanoid Robot Nervous System Architecture</text>

  <!-- Physical Robot -->
  <g transform="translate(500, 400)">
    <!-- Head -->
    <circle cx="0" cy="-120" r="35" fill="#E0E0E0" stroke="#333" stroke-width="2" />
    <text x="0" y="-125" text-anchor="middle" font-size="10" fill="#333">Head (Sensors)</text>
    
    <!-- Torso -->
    <rect x="-35" y="-85" width="70" height="100" fill="#E0E0E0" stroke="#333" stroke-width="2" rx="5" ry="5" />
    <text x="0" y="-30" text-anchor="middle" font-size="10" fill="#333">Torso (Compute)</text>
    
    <!-- Arms -->
    <line x1="-35" y1="-60" x2="-90" y2="-20" stroke="#333" stroke-width="6" />
    <line x1="35" y1="-60" x2="90" y2="-20" stroke="#333" stroke-width="6" />
    <text x="-70" y="-40" text-anchor="middle" font-size="10" fill="#333">Left Arm</text>
    <text x="70" y="-40" text-anchor="middle" font-size="10" fill="#333">Right Arm</text>
    
    <!-- Legs -->
    <line x1="-20" y1="15" x2="-20" y2="120" stroke="#333" stroke-width="6" />
    <line x1="20" y1="15" x2="20" y2="120" stroke="#333" stroke-width="6" />
    <text x="-20" y="130" text-anchor="middle" font-size="10" fill="#333">Left Leg</text>
    <text x="20" y="130" text-anchor="middle" font-size="10" fill="#333">Right Leg</text>
    
    <!-- Feet -->
    <rect x="-35" y="120" width="25" height="10" fill="#E0E0E0" stroke="#333" stroke-width="1" />
    <rect x="10" y="120" width="25" height="10" fill="#E0E0E0" stroke="#333" stroke-width="1" />
  </g>

  <!-- ROS 2 Middleware Layer -->
  <g transform="translate(500, 200)">
    <ellipse cx="0" cy="0" rx="200" ry="40" fill="#FFECB3" stroke="#FF8F00" stroke-width="3" />
    <text x="0" y="5" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">ROS 2 Middleware (DDS)</text>
  </g>

  <!-- Sensor Nodes -->
  <g transform="translate(150, 100)">
    <rect x="0" y="0" width="140" height="60" rx="10" ry="10" fill="#FFAB91" stroke="#E64A19" stroke-width="2" />
    <text x="70" y="25" text-anchor="middle" font-size="14" fill="#333" font-weight="bold">Sensor Nodes</text>
    <text x="70" y="45" text-anchor="middle" font-size="12" fill="#333">(Cameras, IMU, LIDAR)</text>
  </g>

  <!-- Perception Nodes -->
  <g transform="translate(350, 100)">
    <rect x="0" y="0" width="140" height="60" rx="10" ry="10" fill="#80DEEA" stroke="#00838F" stroke-width="2" />
    <text x="70" y="25" text-anchor="middle" font-size="14" fill="#333" font-weight="bold">Perception Nodes</text>
    <text x="70" y="45" text-anchor="middle" font-size="12" fill="#333">(Vision, SLAM)</text>
  </g>

  <!-- AI/Decision Nodes -->
  <g transform="translate(550, 100)">
    <rect x="0" y="0" width="140" height="60" rx="10" ry="10" fill="#CE93D8" stroke="#7B1FA2" stroke-width="2" />
    <text x="70" y="25" text-anchor="middle" font-size="14" fill="#333" font-weight="bold">AI/Decision Nodes</text>
    <text x="70" y="45" text-anchor="middle" font-size="12" fill="#333">(Path Planning, Behaviors)</text>
  </g>

  <!-- Control Nodes -->
  <g transform="translate(750, 100)">
    <rect x="0" y="0" width="140" height="60" rx="10" ry="10" fill="#A5D6A7" stroke="#388E3C" stroke-width="2" />
    <text x="70" y="25" text-anchor="middle" font-size="14" fill="#333" font-weight="bold">Control Nodes</text>
    <text x="70" y="45" text-anchor="middle" font-size="12" fill="#333">(Motion, Balance)</text>
  </g>

  <!-- Robot State Publisher -->
  <g transform="translate(300, 300)">
    <rect x="0" y="0" width="160" height="50" rx="8" ry="8" fill="#B39DDB" stroke="#5E35B1" stroke-width="2" />
    <text x="80" y="20" text-anchor="middle" font-size="14" fill="#333" font-weight="bold">Robot State</text>
    <text x="80" y="40" text-anchor="middle" font-size="12" fill="#333">Publisher</text>
  </g>

  <!-- Transform (TF) System -->
  <g transform="translate(600, 300)">
    <rect x="0" y="0" width="160" height="50" rx="8" ry="8" fill="#B39DDB" stroke="#5E35B1" stroke-width="2" />
    <text x="80" y="20" text-anchor="middle" font-size="14" fill="#333" font-weight="bold">Transform (TF)</text>
    <text x="80" y="40" text-anchor="middle" font-size="12" fill="#333">System</text>
  </g>

  <!-- Python Agent Interface -->
  <g transform="translate(100, 500)">
    <rect x="0" y="0" width="180" height="60" rx="10" ry="10" fill="#FFF59D" stroke="#F57F17" stroke-width="3" />
    <text x="90" y="25" text-anchor="middle" font-size="14" fill="#333" font-weight="bold">Python Agent</text>
    <text x="90" y="45" text-anchor="middle" font-size="12" fill="#333">(Human Interface)</text>
  </g>

  <!-- Simulation Environment -->
  <g transform="translate(750, 500)">
    <rect x="0" y="0" width="180" height="60" rx="10" ry="10" fill="#81D4FA" stroke="#0288D1" stroke-width="3" />
    <text x="90" y="25" text-anchor="middle" font-size="14" fill="#333" font-weight="bold">Simulation</text>
    <text x="90" y="45" text-anchor="middle" font-size="12" fill="#333">(Gazebo/Unity)</text>
  </g>

  <!-- Communication Links -->
  <!-- Sensor to Middleware -->
  <line x1="220" y1="100" x2="400" y2="180" stroke="#333" stroke-width="2" stroke-dasharray="4,4" marker-end="url(#arrowhead)" />
  <text x="300" y="130" text-anchor="middle" font-size="10" fill="#333">sensor_msgs</text>

  <!-- Perception to Middleware -->
  <line x1="420" y1="100" x2="400" y2="180" stroke="#333" stroke-width="2" stroke-dasharray="4,4" marker-end="url(#arrowhead)" />
  <text x="410" y="130" text-anchor="middle" font-size="10" fill="#333">nav_msgs</text>

  <!-- AI to Middleware -->
  <line x1="620" y1="100" x2="400" y2="180" stroke="#333" stroke-width="2" stroke-dasharray="4,4" marker-end="url(#arrowhead)" />
  <text x="520" y="130" text-anchor="middle" font-size="10" fill="#333">action_msgs</text>

  <!-- Control to Middleware -->
  <line x1="820" y1="100" x2="400" y2="180" stroke="#333" stroke-width="2" stroke-dasharray="4,4" marker-end="url(#arrowhead)" />
  <text x="620" y="130" text-anchor="middle" font-size="10" fill="#333">control_msgs</text>

  <!-- Middleware to Robot State -->
  <line x1="400" y1="180" x2="380" y2="300" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="360" y="240" text-anchor="middle" font-size="10" fill="#333">joint_states</text>

  <!-- Middleware to TF -->
  <line x1="400" y1="180" x2="680" y2="300" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="560" y="240" text-anchor="middle" font-size="10" fill="#333">tf/tf2</text>

  <!-- Python Agent to Middleware -->
  <line x1="190" y1="500" x2="400" y2="240" stroke="#333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)" />
  <text x="280" y="370" text-anchor="middle" font-size="10" fill="#333">std_msgs</text>

  <!-- Middleware to Simulation -->
  <line x1="600" y1="240" x2="840" y2="500" stroke="#333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)" />
  <text x="700" y="370" text-anchor="middle" font-size="10" fill="#333">simulation_msgs</text>

  <!-- Feedback links -->
  <line x1="400" y1="300" x2="240" y2="160" stroke="#795548" stroke-width="1" stroke-dasharray="4,4" marker-end="url(#arrowhead2)" />
  <line x1="680" y1="300" x2="400" y2="220" stroke="#795548" stroke-width="1" stroke-dasharray="4,4" marker-end="url(#arrowhead2)" />
  <line x1="400" y1="240" x2="740" y2="160" stroke="#795548" stroke-width="1" stroke-dasharray="4,4" marker-end="url(#arrowhead2)" />
  <line x1="840" y1="500" x2="400" y2="220" stroke="#795548" stroke-width="1" stroke-dasharray="4,4" marker-end="url(#arrowhead2)" />

  <!-- Arrow marker definitions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
    <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="1" refY="3.5" orient="auto">
      <polygon points="10 0, 0 3.5, 10 7" fill="#795548" />
    </marker>
  </defs>

  <!-- Legend -->
  <g transform="translate(50, 600)">
    <rect x="0" y="0" width="300" height="90" fill="none" stroke="#333" stroke-width="1" />
    
    <g transform="translate(10, 15)">
      <rect x="0" y="0" width="20" height="10" fill="#FFAB91" stroke="#E64A19" />
      <text x="30" y="10" font-size="12" fill="#333">Sensor Nodes</text>
    </g>
    
    <g transform="translate(150, 15)">
      <rect x="0" y="0" width="20" height="10" fill="#80DEEA" stroke="#00838F" />
      <text x="30" y="10" font-size="12" fill="#333">Perception</text>
    </g>
    
    <g transform="translate(10, 35)">
      <rect x="0" y="0" width="20" height="10" fill="#CE93D8" stroke="#7B1FA2" />
      <text x="30" y="10" font-size="12" fill="#333">AI/Decision</text>
    </g>
    
    <g transform="translate(150, 35)">
      <rect x="0" y="0" width="20" height="10" fill="#A5D6A7" stroke="#388E3C" />
      <text x="30" y="10" font-size="12" fill="#333">Control</text>
    </g>
    
    <g transform="translate(10, 55)">
      <rect x="0" y="0" width="20" height="10" fill="#B39DDB" stroke="#5E35B1" />
      <text x="30" y="10" font-size="12" fill="#333">State/TF</text>
    </g>
    
    <g transform="translate(150, 55)">
      <rect x="0" y="0" width="20" height="10" fill="#FFF59D" stroke="#F57F17" />
      <text x="30" y="10" font-size="12" fill="#333">Agent</text>
    </g>
    
    <g transform="translate(10, 75)">
      <ellipse cx="10" cy="5" rx="10" ry="5" fill="#FFECB3" stroke="#FF8F00" />
      <text x="30" y="10" font-size="12" fill="#333">ROS 2 Middleware</text>
    </g>
    
    <g transform="translate(150, 75)">
      <rect x="0" y="0" width="20" height="10" fill="#81D4FA" stroke="#0288D1" />
      <text x="30" y="10" font-size="12" fill="#333">Simulation</text>
    </g>
  </g>

  <!-- Architecture Layers -->
  <g transform="translate(400, 620)">
    <rect x="0" y="0" width="550" height="70" fill="none" stroke="#333" stroke-width="2" />
    <text x="275" y="20" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">Architecture Layers</text>
    <text x="275" y="40" text-anchor="middle" font-size="12" fill="#333">Application Layer → ROS 2 Middleware → Hardware Abstraction → Physical Robot</text>
    <text x="275" y="60" text-anchor="middle" font-size="12" fill="#666">Data flows bidirectionally through the middleware</text>
  </g>

  <!-- Communication Protocols -->
  <g transform="translate(650, 600)">
    <rect x="0" y="0" width="200" height="50" fill="#F1F8E9" stroke="#689F38" stroke-width="1" />
    <text x="100" y="18" text-anchor="middle" font-size="12" fill="#333" font-weight="bold">Communication Protocols</text>
    <text x="100" y="38" text-anchor="middle" font-size="10" fill="#333">DDS, TCP/UDP, Shared Memory</text>
  </g>
</svg>